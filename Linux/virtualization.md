# 가상화 (Virtualization)
**물리 자원을 추상화 하는 방법** 으로 하나의 물리 자원을 여러 개의 논리적인 자원으로 나누거나,<br>
여러 개의 물리 자원을 하나의 논리적 자원으로 다루는 것이다.

## 가상화를 하는 이유는 무엇일까
OS 1개당 물리적 서버 1대가 필요하다. 만약 여러 개의 OS를 동작시켜야 하는 경우에는 그만큼의 물리적 서버가 필요하다. 그리고 여러 운영체제를 실행하는 것을 비용(서버 사는데 드는 비용, 유지 보수 및 관리하는데 드는 비용)이 많이 드는 작업이다. 이러한 상황에서 가상화를 이용한다면 하나의 물리적 서버에서 여러 개의 운영체제를 동작시킬 수 있기 때문에 시간과 비용을 절약할 수 있다.


## 가상화의 단점
1. 물리적 서버 대비 퍼포먼스가 떨어진다.
    - DB 서버, ERP 서버 등 성능에 민감한 서버는 가상화 하지 않는 걸 추천하는 것 같다.

2. 생각보다 비용이 많이 든다.
    - 라이센스 비용이 생각보다 비싸다.
    - 서버 수가 많아지면 가상화용 라이센스 말고도 관리용 라이센스도 필요하게 되는데 이것도 비싸다.

## 가상화 종류
### 호스트 OS
- 호스트 운영체제 위에 가상화 소프트웨어와 가상머신을 동작시키는 방식이다. 물리적 하드웨어 위에 OS를 설치하고 그 위에 게스트 OS 전체를 가상화 하는 방식이다.

### 전가상화
- 호스트 OS를 설치하는게 아니라 하이퍼바이저 소프트웨어를 하드웨어 위에 직접 작동시켜서 각각의 가상머신 위에 게스트 OS를 설치한다. 호스트OS 형과 다른 점은 가상머신이 마치 독립적인 호스트 시스템처럼 작동하는 것이다. 여러 가상머신이 서로 간섭하지 않도록 하는 것이 하이퍼바이저의 역할이기 때문에 처리 오버헤드가 존재하지 않는다.

### 반가상화
- Xen에서 전가상화 방식의 큰 문제였던 성능을 해결하기 위해 나오게 됐다. 하드웨어 전체를 완전히 가상화 하는 방식이 아니다. 게스트 커널의 일부를 수정해서 특정 명령이 수행될 때 하이퍼 콜을 통해서 하이퍼바이저가 실행되도록 한다. 게스트 OS가 하드웨어를 제어하지 않고 하이퍼바이저가 제어한다.
- e.g. Xen, KVM

### 컨테이너
- 위의 방식과 다르게 OS를 가상화 하는게 아닌 소프트웨어를 가상화 하는 방식이다. 프로세스를 격리 시키기 때문에 가볍고 빠르게 동작한다. CPU나 메모리는 프로세스가 필요한 만큼만 추가로 사용되기 때문에 성능적으로도 거의 손실이 없다. 하나의 서버에 여러 개의 컨테이너를 실행하면 서로 영향을 주지 않고 독립적으로 실행되기 때문에, 성능 좋고 가벼운 가상머신을 사용하는 느낌을 준다.

---

[^1] https://www.ibm.com/kr-ko/cloud/learn/virtualization-a-complete-guide<br>
[^2] https://www.redhat.com/ko/topics/virtualization
